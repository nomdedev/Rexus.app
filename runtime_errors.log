Intentando cargar aplicación completa...
2025-08-18 20:45:03 | INFO     | rexus           | Sistema de logging Rexus inicializado
[INFO] Sistema de logging Rexus inicializado
2025-08-18 20:45:03 | INFO     | rexus.startup   | Variables de entorno cargadas desde .env
[INFO] Variables de entorno cargadas desde .env
[LOG 4.1] Inicializando QtWebEngine de forma robusta...
2025-08-18 20:45:03 | WARNING  | rexus.utils.webengine_manager | QtWebEngine no disponible: No module named 'PyQt6.QtWebEngine'
[WARNING] QtWebEngine no disponible: No module named 'PyQt6.QtWebEngine'
[LOG 4.1] QtWebEngine no disponible, usando fallbacks
[LOG 4.1] Razones: ["Import falló: No module named 'PyQt6.QtWebEngine'"]
2025-08-18 20:45:03 | INFO     | rexus.startup   | ============================================================
[INFO] ============================================================
2025-08-18 20:45:03 | INFO     | rexus.startup   | REXUS.APP - INICIO DE APLICACIÓN
[INFO] REXUS.APP - INICIO DE APLICACIÓN
2025-08-18 20:45:03 | INFO     | rexus.startup   | Versión Python: 3.10.5 (tags/v3.10.5:f377153, Jun  6 2022, 16:14:13) [MSC v.1929 64 bit (AMD64)]
[INFO] Versión Python: 3.10.5 (tags/v3.10.5:f377153, Jun  6 2022, 16:14:13) [MSC v.1929 64 bit (AMD64)]
2025-08-18 20:45:03 | INFO     | rexus.startup   | Directorio de trabajo: D:\martin\Rexus.app
[INFO] Directorio de trabajo: D:\martin\Rexus.app
2025-08-18 20:45:03 | INFO     | rexus.startup   | Argumentos: ['main.py']
[INFO] Argumentos: ['main.py']
2025-08-18 20:45:03 | INFO     | rexus.startup   | ============================================================
[INFO] ============================================================
2025-08-18 20:45:03 | INFO     | rexus.startup   | Iniciando Rexus.app
[INFO] Iniciando Rexus.app
2025-08-18 20:45:03 | INFO     | rexus.startup   | Validando dependencias críticas del sistema
[INFO] Validando dependencias críticas del sistema
[SUBMODULOS INVENTARIO] OK - Submodulos cargados correctamente
2025-08-18 20:45:04 | INFO     | rexus.inventario.model | Submódulos especializados cargados
[INFO] Submódulos especializados cargados
[STYLE] Tema oscuro detectado en Windows - aplicando correcciones criticas
[STYLE] Aplicando correcciones criticas automaticas para tema oscuro
[STYLE] [ART] Aplicando tema oscuro mejorado
[STYLE] [WARNING] No se pudo obtener instancia de QApplication
[STYLE] Aplicando correcciones criticas automaticas para tema oscuro
[STYLE] [ART] Aplicando tema oscuro mejorado
[STYLE]  Aplicando correcciones críticas de contraste
[STYLE] [OK] Correcciones automáticas aplicadas exitosamente
2025-08-18 20:45:04 | INFO     | rexus.startup   | Validación de dependencias exitosa - 0 advertencias
[INFO] Validación de dependencias exitosa - 0 advertencias
2025-08-18 20:45:04 | INFO     | rexus.startup   | module_manager validado correctamente
[INFO] module_manager validado correctamente
2025-08-18 20:45:04 | INFO     | rexus.startup   | Iniciando QApplication
[INFO] Iniciando QApplication
2025-08-18 20:45:04 | INFO     | rexus.startup   | QApplication inicializada, preparando login
[INFO] QApplication inicializada, preparando login
[SECURITY] Conexión BD exitosa para sistema de seguridad
2025-08-18 20:45:04 | INFO     | rexus.security  | [SECURITY-INFO] SecurityManager inicializado correctamente
[INFO] [SECURITY-INFO] SecurityManager inicializado correctamente
2025-08-18 20:45:04 | INFO     | rexus.security  | [SECURITY-INFO] Sistema de seguridad completo inicializado
[INFO] [SECURITY-INFO] Sistema de seguridad completo inicializado
[INFO] Programador de backups iniciado
[CHECK] Sistema de backup inicializado correctamente
[CHECK] Sistema de backup automático inicializado
[LOG 4.10] QApplication loop iniciado.
2025-08-18 20:45:08 | INFO     | rexus.core.database | Intentando conectar a la base de datos
[INFO] Intentando conectar a la base de datos
2025-08-18 20:45:08 | INFO     | rexus.core.database | Servidor: ITACHI\SQLEXPRESS
[INFO] Servidor: ITACHI\SQLEXPRESS
2025-08-18 20:45:08 | INFO     | rexus.core.database | Base de datos: users
[INFO] Base de datos: users
2025-08-18 20:45:08 | INFO     | rexus.core.database | Driver: ODBC Driver 17 for SQL Server
[INFO] Driver: ODBC Driver 17 for SQL Server
2025-08-18 20:45:08 | INFO     | rexus.core.database | Usuario: sa
[INFO] Usuario: sa
[DEBUG] String de conexión: DRIVER={ODBC Driver 17 for SQL Server};SERVER=ITACHI\SQLEXPRESS;DATABASE=users;UID=sa;PWD=******;TrustServerCertificate=yes;
2025-08-18 20:45:08 | INFO     | rexus.core.database | Conexión exitosa OK
[INFO] Conexión exitosa OK
[DEBUG] get_user_modules llamado con user_id: 1
[DEBUG] current_role: 'ADMIN'
[DEBUG] current_user: {'username': 'admin', 'role': 'ADMIN', 'nombre': 'Administrador', 'apellido': 'Admin', 'email': 'admin@rexus.app', 'authenticated': True}
[DEBUG] Admin detectado, devolviendo 12 módulos
[CHECK] Usuario autenticado: admin (rol: admin)
[CHECK] [LOGIN] Autenticación exitosa para admin (ADMIN)
[SECURITY] Contexto establecido - Usuario: admin, Rol: ADMIN
2025-08-18 20:45:08 | INFO     | rexus.core.security | Estado del sistema de permisos:
[INFO] Estado del sistema de permisos:
2025-08-18 20:45:08 | INFO     | rexus.core.security |   security_manager_initialized: True
[INFO]   security_manager_initialized: True
2025-08-18 20:45:08 | INFO     | rexus.core.security |   current_user: {'username': 'admin', 'role': 'ADMIN', 'nombre': 'Administrador', 'apellido': 'Admin', 'email': 'admin@rexus.app', 'authenticated': True}
[INFO]   current_user: {'username': 'admin', 'role': 'ADMIN', 'nombre': 'Administrador', 'apellido': 'Admin', 'email': 'admin@rexus.app', 'authenticated': True}
2025-08-18 20:45:08 | INFO     | rexus.core.security |   current_role: ADMIN
[INFO]   current_role: ADMIN
2025-08-18 20:45:08 | INFO     | rexus.core.security |   db_connection_status: Connected
[INFO]   db_connection_status: Connected
2025-08-18 20:45:08 | INFO     | rexus.core.security |   session_active: True
[INFO]   session_active: True
2025-08-18 20:45:08 | INFO     | rexus.core.security |   role_recognized: True
[INFO]   role_recognized: True
2025-08-18 20:45:08 | INFO     | rexus.core.security |   modules_count: 12
[INFO]   modules_count: 12
2025-08-18 20:45:08 | INFO     | rexus.core.security |   has_admin_access: True
[INFO]   has_admin_access: True
2025-08-18 20:45:08 | INFO     | rexus.core.security |   modules_list: ['Inventario', 'Administración', 'Obras', 'Pedidos', 'Logística', 'Herrajes', 'Vidrios', 'Usuarios', 'Auditoría', 'Configuración', 'Compras', 'Mantenimiento']
[INFO]   modules_list: ['Inventario', 'Administración', 'Obras', 'Pedidos', 'Logística', 'Herrajes', 'Vidrios', 'Usuarios', 'Auditoría', 'Configuración', 'Compras', 'Mantenimiento']
[DEBUG] get_user_modules llamado con user_id: 1
[DEBUG] current_role: 'ADMIN'
[DEBUG] current_user: {'username': 'admin', 'role': 'ADMIN', 'nombre': 'Administrador', 'apellido': 'Admin', 'email': 'admin@rexus.app', 'authenticated': True}
[DEBUG] Admin detectado, devolviendo 12 módulos
[SECURITY] Módulos obtenidos para ADMIN: 12 módulos
[SECURITY] Lista de módulos: ['Inventario', 'Administración', 'Obras', 'Pedidos', 'Logística', 'Herrajes', 'Vidrios', 'Usuarios', 'Auditoría', 'Configuración', 'Compras', 'Mantenimiento']
2025-08-18 20:45:08 | INFO     | rexus.security  | Creando MainWindow para usuario: admin
[INFO] Creando MainWindow para usuario: admin
[DEBUG] Módulos permitidos: ['Inventario', 'Administración', 'Obras', 'Pedidos', 'Logística', 'Herrajes', 'Vidrios', 'Usuarios', 'Auditoría', 'Configuración', 'Compras', 'Mantenimiento']
[STYLE] [DARK] Detectado tema oscuro 'dark' - aplicando correcciones críticas automáticas
[STYLE] Correcciones críticas de contraste aplicadas globalmente
[STYLE] Tema aplicado: dark
[STYLE] Tema 'dark' aplicado globalmente
[STYLE] apply_emergency_readable_forms DESHABILITADO - sin correcciones invasivas
[STYLE] [OK] Formularios ultra-legibles aplicados correctamente
[DEBUG] Módulo 'Obras': permisos=True
[DEBUG] Módulo 'Inventario': permisos=True
[DEBUG] Módulo 'Herrajes': permisos=True
[DEBUG] Módulo 'Vidrios': permisos=True
[DEBUG] Módulo 'Logística': permisos=True
[DEBUG] Módulo 'Pedidos': permisos=True
[DEBUG] Módulo 'Compras': permisos=True
[DEBUG] Módulo 'Administración': permisos=True
[DEBUG] Módulo 'Mantenimiento': permisos=True
[DEBUG] Módulo 'Auditoría': permisos=True
[DEBUG] Módulo 'Usuarios': permisos=True
[DEBUG] Módulo 'Configuración': permisos=True
2025-08-18 20:45:09 | INFO     | rexus.security  | Aplicación iniciada para admin
[INFO] Aplicación iniciada para admin
[Inventario] Iniciando carga de módulo...
[Inventario] Paso 1: Creando modelo...
[Inventario] Instanciando clase modelo: InventarioModel
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | Utilidades de seguridad cargadas
[INFO] Utilidades de seguridad cargadas
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | SQL script loader disponible
[INFO] SQL script loader disponible
2025-08-18 20:45:11 | INFO     | rexus.modules.inventario.submodules.base_utilities | Utilidades de seguridad cargadas en BaseUtilities
[INFO] Utilidades de seguridad cargadas en BaseUtilities
2025-08-18 20:45:11 | INFO     | rexus.modules.inventario.submodules.base_utilities | Utilidades de seguridad cargadas en BaseUtilities
[INFO] Utilidades de seguridad cargadas en BaseUtilities
2025-08-18 20:45:11 | INFO     | rexus.modules.inventario.submodules.base_utilities | Utilidades de seguridad cargadas en BaseUtilities
[INFO] Utilidades de seguridad cargadas en BaseUtilities
2025-08-18 20:45:11 | INFO     | rexus.modules.inventario.submodules.base_utilities | Utilidades de seguridad cargadas en BaseUtilities
[INFO] Utilidades de seguridad cargadas en BaseUtilities
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | Managers especializados inicializados
[INFO] Managers especializados inicializados
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | ConsultasManager inicializado
[INFO] ConsultasManager inicializado
2025-08-18 20:45:11 | INFO     | rexus.core.database | Intentando conectar a la base de datos
[INFO] Intentando conectar a la base de datos
2025-08-18 20:45:11 | INFO     | rexus.core.database | Servidor: ITACHI\SQLEXPRESS
[INFO] Servidor: ITACHI\SQLEXPRESS
2025-08-18 20:45:11 | INFO     | rexus.core.database | Base de datos: inventario
[INFO] Base de datos: inventario
2025-08-18 20:45:11 | INFO     | rexus.core.database | Driver: ODBC Driver 17 for SQL Server
[INFO] Driver: ODBC Driver 17 for SQL Server
2025-08-18 20:45:11 | INFO     | rexus.core.database | Usuario: sa
[INFO] Usuario: sa
[DEBUG] String de conexión: DRIVER={ODBC Driver 17 for SQL Server};SERVER=ITACHI\SQLEXPRESS;DATABASE=inventario;UID=sa;PWD=******;TrustServerCertificate=yes;
2025-08-18 20:45:11 | INFO     | rexus.core.database | Conexión exitosa OK
[INFO] Conexión exitosa OK
[DEBUG] [SQL_MANAGER] Consulta cargada: inventario.verificar_tabla_existe desde D:\martin\Rexus.app\sql\inventario\verificar_tabla_existe.sql
2025-08-18 20:45:11 | ERROR    | rexus.inventario.model | [INVENTARIO] Tabla principal 'inventario_perfiles' verificada correctamente.
[ERROR] [INVENTARIO] Tabla principal 'inventario_perfiles' verificada correctamente.
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | Tabla 'historial' verificada correctamente
[INFO] Tabla 'historial' verificada correctamente
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | Tabla 'reserva_materiales' verificada correctamente
[INFO] Tabla 'reserva_materiales' verificada correctamente
2025-08-18 20:45:11 | INFO     | rexus.inventario.model | Verificación de tablas completada
[INFO] Verificación de tablas completada
[Inventario] Modelo creado con conexión BD
[Inventario] Paso 2: Creando vista...
[Inventario] Instanciando clase vista: InventarioView
[THEME_FIX] Tema oscuro detectado - aplicando correcciones a módulo
[THEME_FIX] Estilos seguros aplicados a InventarioView
[[PACKAGE] GESTIÓN DE INVENTARIO] Estilos aplicados con correcciones de legibilidad
[WARNING] Error en add_to_main_content: addLayout(self, layout: Optional[QLayout], stretch: int = 0): argument 1 has unexpected type 'QSplitter'
[Inventario] Vista creada exitosamente
[Inventario] Paso 3: Creando controlador...
[Inventario] Instanciando clase controlador: InventarioController
2025-08-18 20:45:11 | INFO     | rexus.inventario.controller | Inicializando controlador completo de inventario
[INFO] Inicializando controlador completo de inventario
[DEBUG] Conectando señales de la vista de inventario...
[DEBUG] Conectado botón: btn_buscar
2025-08-18 20:45:11 | ERROR    | rexus.inventario.controller | Error conectando señales: wrapped C/C++ object of type RexusButton has been deleted
Traceback (most recent call last):
  File "D:\martin\Rexus.app\rexus\modules\inventario\controller.py", line 123, in conectar_senales
    self._conectar_boton("btn_actualizar", self.cargar_inventario)
  File "D:\martin\Rexus.app\rexus\modules\inventario\controller.py", line 160, in _conectar_boton
    boton.clicked.connect(metodo)
RuntimeError: wrapped C/C++ object of type RexusButton has been deleted
[ERROR] Error conectando señales: wrapped C/C++ object of type RexusButton has been deleted
Traceback (most recent call last):
  File "D:\martin\Rexus.app\rexus\modules\inventario\controller.py", line 123, in conectar_senales
    self._conectar_boton("btn_actualizar", self.cargar_inventario)
  File "D:\martin\Rexus.app\rexus\modules\inventario\controller.py", line 160, in _conectar_boton
    boton.clicked.connect(metodo)
RuntimeError: wrapped C/C++ object of type RexusButton has been deleted
2025-08-18 20:45:11 | INFO     | rexus.inventario.controller | Controlador de inventario inicializado exitosamente
[INFO] Controlador de inventario inicializado exitosamente
[Inventario] Controlador creado exitosamente
[Inventario] Paso 4: Configurando conexiones...
[INVENTARIO] Conectado btn_nuevo_producto -> nuevo_producto
[INVENTARIO] Error conectando btn_editar: wrapped C/C++ object of type RexusButton has been deleted
[INVENTARIO] Error conectando btn_eliminar: wrapped C/C++ object of type RexusButton has been deleted
[INVENTARIO] Conectado btn_exportar -> exportar_inventario
[INVENTARIO] Saltando btn_importar - no disponible
[INVENTARIO] Error conectando btn_movimiento: wrapped C/C++ object of type RexusButton has been deleted
[INVENTARIO] Saltando btn_reporte_stock_bajo - no disponible
[INVENTARIO] Saltando btn_asociar_obra - no disponible
[INVENTARIO] Saltando btn_generar_qr - no disponible
[Inventario] Vista conectada al controlador
[Inventario] Paso 5: Cargando datos iniciales...
2025-08-18 20:45:11 | INFO     | rexus.inventario.controller | Iniciando carga inicial de inventario
[INFO] Iniciando carga inicial de inventario
[DEBUG] Cargando página 1, 100 registros...
2025-08-18 20:45:11 | ERROR    | rexus.inventario.controller | Error en paginación: 'ConsultasManager' object has no attribute 'obtener_productos_paginados_inicial'
Traceback (most recent call last):
  File "D:\martin\Rexus.app\rexus\modules\inventario\controller.py", line 184, in cargar_inventario_paginado
    resultado = self.model.obtener_productos_paginados_inicial(
  File "D:\martin\Rexus.app\rexus\modules\inventario\model.py", line 3117, in obtener_productos_paginados_inicial
    return self.consultas_manager.obtener_productos_paginados_inicial(
AttributeError: 'ConsultasManager' object has no attribute 'obtener_productos_paginados_inicial'
[ERROR] Error en paginación: 'ConsultasManager' object has no attribute 'obtener_productos_paginados_inicial'
Traceback (most recent call last):
  File "D:\martin\Rexus.app\rexus\modules\inventario\controller.py", line 184, in cargar_inventario_paginado
    resultado = self.model.obtener_productos_paginados_inicial(
  File "D:\martin\Rexus.app\rexus\modules\inventario\model.py", line 3117, in obtener_productos_paginados_inicial
    return self.consultas_manager.obtener_productos_paginados_inicial(
AttributeError: 'ConsultasManager' object has no attribute 'obtener_productos_paginados_inicial'
[CHECK] [Inventario] Datos cargados con método específico: cargar_inventario_inicial
[CHECK] [Inventario] Módulo cargado exitosamente
[Obras] Iniciando carga de módulo...
[Obras] Paso 1: Creando modelo...
[Obras] Instanciando clase modelo: ObrasModel
2025-08-18 20:45:13 | INFO     | rexus.core.database | Intentando conectar a la base de datos
[INFO] Intentando conectar a la base de datos
2025-08-18 20:45:13 | INFO     | rexus.core.database | Servidor: ITACHI\SQLEXPRESS
[INFO] Servidor: ITACHI\SQLEXPRESS
2025-08-18 20:45:13 | INFO     | rexus.core.database | Base de datos: inventario
[INFO] Base de datos: inventario
2025-08-18 20:45:13 | INFO     | rexus.core.database | Driver: ODBC Driver 17 for SQL Server
[INFO] Driver: ODBC Driver 17 for SQL Server
2025-08-18 20:45:13 | INFO     | rexus.core.database | Usuario: sa
[INFO] Usuario: sa
[DEBUG] String de conexión: DRIVER={ODBC Driver 17 for SQL Server};SERVER=ITACHI\SQLEXPRESS;DATABASE=inventario;UID=sa;PWD=******;TrustServerCertificate=yes;
2025-08-18 20:45:13 | INFO     | rexus.core.database | Conexión exitosa OK
[INFO] Conexión exitosa OK
[DEBUG] [SQL_MANAGER] Consulta cargada: obras.verificar_tabla_sqlite desde D:\martin\Rexus.app\sql\obras\verificar_tabla_sqlite.sql
2025-08-18 20:45:13 | INFO     | rexus.modules.obras.model | [OBRAS] Tabla 'obras' verificada correctamente.
[INFO] [OBRAS] Tabla 'obras' verificada correctamente.
2025-08-18 20:45:13 | INFO     | rexus.modules.obras.model | [OBRAS] Tabla 'detalles_obra' verificada correctamente.
[INFO] [OBRAS] Tabla 'detalles_obra' verificada correctamente.
[DEBUG] Validando componentes del controlador de obras
[Obras] Modelo creado con conexión BD
[Obras] Paso 2: Creando vista...
[Obras] Instanciando clase vista: ObrasModernView
[OBRAS] Tabla configurada correctamente
[Obras] Vista creada exitosamente
[Obras] Paso 3: Creando controlador...
[Obras] Instanciando clase controlador: ObrasController
2025-08-18 20:45:15 | WARNING  | rexus.obras.controller | Conexión de base de datos no disponible
[WARNING] Conexión de base de datos no disponible
2025-08-18 20:45:15 | INFO     | rexus.obras.controller | Validación de componentes completada
[INFO] Validación de componentes completada
[DEBUG] Iniciando carga de obras
[DEBUG] [SQL_MANAGER] Consulta cargada: obras.select_obras_activas desde D:\martin\Rexus.app\sql\obras\select_obras_activas.sql
[Obras] Controlador creado exitosamente
[Obras] Paso 4: Configurando conexiones...
[Obras] Vista no requiere conexión explícita
[Obras] Paso 5: Cargando datos iniciales...
2025-08-18 20:45:15 | INFO     | rexus.modules.obras.model | [ERROR OBRAS] Error obteniendo todas las obras: ('The SQL contains 0 parameter markers, but 2 parameters were supplied', 'HY000')
[INFO] [ERROR OBRAS] Error obteniendo todas las obras: ('The SQL contains 0 parameter markers, but 2 parameters were supplied', 'HY000')
[DEBUG] Using pickle serialization for type: dict
[DEBUG] [SQL_MANAGER] Consulta cargada: obras.select_estadisticas_completas_obras desde D:\martin\Rexus.app\sql\obras\select_estadisticas_completas_obras.sql
[WARNING] Error registrando acceso: 'SecurityManager' object has no attribute 'log_access_attempt'
2025-08-18 20:45:16 | INFO     | rexus.modules.obras.model | [ERROR OBRAS] Error obteniendo estadísticas: Archivo SQL no encontrado: calcular_presupuesto_total.sql en módulo obras. Rutas buscadas: ['D:\\martin\\Rexus.app\\sql\\obras\\calcular_presupuesto_total.sql', 'D:\\martin\\Rexus.app\\sql\\calcular_presupuesto_total.sql', 'D:\\martin\\Rexus.app\\sql\\common\\calcular_presupuesto_total.sql']
[INFO] [ERROR OBRAS] Error obteniendo estadísticas: Archivo SQL no encontrado: calcular_presupuesto_total.sql en módulo obras. Rutas buscadas: ['D:\\martin\\Rexus.app\\sql\\obras\\calcular_presupuesto_total.sql', 'D:\\martin\\Rexus.app\\sql\\calcular_presupuesto_total.sql', 'D:\\martin\\Rexus.app\\sql\\common\\calcular_presupuesto_total.sql']
[DEBUG] Using pickle serialization for type: dict
2025-08-18 20:45:16 | INFO     | rexus.obras.controller | Cargadas 2 obras exitosamente
[INFO] Cargadas 2 obras exitosamente
[CHECK] [Obras] Datos cargados con método específico: cargar_obras
[CHECK] [Obras] Módulo cargado exitosamente
2025-08-18 20:45:17 | INFO     | rexus.vidrios.model | Sistema unificado de sanitización cargado
[INFO] Sistema unificado de sanitización cargado
[Vidrios] Iniciando carga de módulo...
[Vidrios] Paso 1: Creando modelo...
[Vidrios] Instanciando clase modelo: VidriosModel
2025-08-18 20:45:17 | INFO     | rexus.vidrios.model | Sanitizador inicializado correctamente
[INFO] Sanitizador inicializado correctamente
2025-08-18 20:45:17 | WARNING  | rexus.vidrios.model | No se puede verificar tablas: conexión no disponible
[WARNING] No se puede verificar tablas: conexión no disponible
[Vidrios] Modelo creado con conexión BD
[Vidrios] Paso 2: Creando vista...
[Vidrios] Instanciando clase vista: VidriosModernView
[Vidrios] Vista creada exitosamente
[Vidrios] Paso 3: Creando controlador...
[Vidrios] Instanciando clase controlador: VidriosController
[Vidrios] Controlador creado exitosamente
[Vidrios] Paso 4: Configurando conexiones...
[Vidrios] Vista no requiere conexión explícita
[Vidrios] Paso 5: Cargando datos iniciales...
2025-08-18 20:45:17 | WARNING  | rexus.core.module_manager | [Vidrios] Método cargar_vidrios no encontrado en controlador
[WARNING] [Vidrios] Método cargar_vidrios no encontrado en controlador
2025-08-18 20:45:17 | WARNING  | rexus.vidrios.model | No se puede obtener vidrios: conexión no disponible
[WARNING] No se puede obtener vidrios: conexión no disponible
2025-08-18 20:45:17 | ERROR    | rexus.vidrios.model | Error obteniendo estadísticas: 'NoneType' object has no attribute 'cursor'
[ERROR] Error obteniendo estadísticas: 'NoneType' object has no attribute 'cursor'
[CHECK] [Vidrios] Datos cargados con método genérico: cargar_datos_iniciales
[CHECK] [Vidrios] Módulo cargado exitosamente
[Logistica] Iniciando carga de módulo...
[Logistica] Paso 1: Creando modelo...
[Logistica] Instanciando clase modelo: LogisticaModel
2025-08-18 20:45:23 | INFO     | rexus.core.database | Intentando conectar a la base de datos
[INFO] Intentando conectar a la base de datos
2025-08-18 20:45:23 | INFO     | rexus.core.database | Servidor: ITACHI\SQLEXPRESS
[INFO] Servidor: ITACHI\SQLEXPRESS
2025-08-18 20:45:23 | INFO     | rexus.core.database | Base de datos: inventario
[INFO] Base de datos: inventario
2025-08-18 20:45:23 | INFO     | rexus.core.database | Driver: ODBC Driver 17 for SQL Server
[INFO] Driver: ODBC Driver 17 for SQL Server
2025-08-18 20:45:23 | INFO     | rexus.core.database | Usuario: sa
[INFO] Usuario: sa
[DEBUG] String de conexión: DRIVER={ODBC Driver 17 for SQL Server};SERVER=ITACHI\SQLEXPRESS;DATABASE=inventario;UID=sa;PWD=******;TrustServerCertificate=yes;
2025-08-18 20:45:23 | INFO     | rexus.core.database | Conexión exitosa OK
[INFO] Conexión exitosa OK
[LOGÍSTICA] Tabla 'transportes' verificada correctamente.
[LOGÍSTICA] Tabla 'entregas' verificada correctamente.
[LOGÍSTICA] Tabla 'detalle_entregas' verificada correctamente.
[LOGÍSTICA] Tabla 'proveedores_transporte' verificada correctamente.
[LOGÍSTICA] Tabla 'rutas' verificada correctamente.
[LOGÍSTICA] Tabla 'costos_logisticos' verificada correctamente.
[LOGÍSTICA] Tabla 'obras' verificada correctamente.
[Logistica] Modelo creado con conexión BD
[Logistica] Paso 2: Creando vista...
[Logistica] Instanciando clase vista: LogisticaView
[Logistica] Vista creada exitosamente
[Logistica] Paso 3: Creando controlador...
[Logistica] Instanciando clase controlador: LogisticaController
[Logistica] Controlador creado exitosamente
[Logistica] Paso 4: Configurando conexiones...
[Logistica] Vista conectada al controlador
[Logistica] Paso 5: Cargando datos iniciales...
2025-08-18 20:45:23 | WARNING  | rexus.core.module_manager | [Logistica] Método cargar_logistica no encontrado en controlador
[WARNING] [Logistica] Método cargar_logistica no encontrado en controlador
2025-08-18 20:45:23 | INFO     | rexus.logistica.controller | Iniciando carga de datos iniciales de logística
[INFO] Iniciando carga de datos iniciales de logística
[DEBUG] Cargando entregas desde el modelo
[DEBUG] [SQL_MANAGER] Consulta cargada: logistica.obtener_entregas_base desde D:\martin\Rexus.app\sql\logistica\obtener_entregas_base.sql
2025-08-18 20:45:23 | INFO     | rexus.logistica.controller | Cargadas 0 entregas
[INFO] Cargadas 0 entregas
[DEBUG] Método obtener_services no disponible en el modelo
[INFO] Protección XSS inicializada en AdministracionViewFuncional
[CHECK] [Logistica] Datos cargados con método genérico: cargar_datos_iniciales
[CHECK] [Logistica] Módulo cargado exitosamente
[Mantenimiento] Iniciando carga de módulo...
[Mantenimiento] Paso 1: Creando modelo...
[Mantenimiento] Instanciando clase modelo: MantenimientoModel
2025-08-18 20:45:45 | INFO     | rexus.core.database | Intentando conectar a la base de datos
[INFO] Intentando conectar a la base de datos
2025-08-18 20:45:45 | INFO     | rexus.core.database | Servidor: ITACHI\SQLEXPRESS
[INFO] Servidor: ITACHI\SQLEXPRESS
2025-08-18 20:45:45 | INFO     | rexus.core.database | Base de datos: inventario
[INFO] Base de datos: inventario
2025-08-18 20:45:45 | INFO     | rexus.core.database | Driver: ODBC Driver 17 for SQL Server
[INFO] Driver: ODBC Driver 17 for SQL Server
2025-08-18 20:45:45 | INFO     | rexus.core.database | Usuario: sa
[INFO] Usuario: sa
[DEBUG] String de conexión: DRIVER={ODBC Driver 17 for SQL Server};SERVER=ITACHI\SQLEXPRESS;DATABASE=inventario;UID=sa;PWD=******;TrustServerCertificate=yes;
2025-08-18 20:45:45 | INFO     | rexus.core.database | Conexión exitosa OK
[INFO] Conexión exitosa OK
[MANTENIMIENTO] Tabla 'equipos' verificada correctamente.
[MANTENIMIENTO] Tabla 'herramientas' verificada correctamente.
[MANTENIMIENTO] Tabla 'mantenimientos' verificada correctamente.
[MANTENIMIENTO] Tabla 'programacion_mantenimiento' verificada correctamente.
[MANTENIMIENTO] Tabla 'tipos_mantenimiento' verificada correctamente.
[MANTENIMIENTO] Tabla 'estado_equipos' verificada correctamente.
[MANTENIMIENTO] Tabla 'historial_mantenimiento' verificada correctamente.
[Mantenimiento] Modelo creado con conexión BD
[Mantenimiento] Paso 2: Creando vista...
[Mantenimiento] Instanciando clase vista: MantenimientoView
[Mantenimiento] Vista creada exitosamente
[Mantenimiento] Paso 3: Creando controlador...
[Mantenimiento] Instanciando clase controlador: MantenimientoController
2025-08-18 20:45:45 | INFO     | rexus.modules.mantenimiento.controller | Verificación completada: 0 vencidos, 0 próximos
[INFO] Verificación completada: 0 vencidos, 0 próximos
[DEBUG] [SQL_MANAGER] Consulta cargada: mantenimiento.obtener_equipos_base desde D:\martin\Rexus.app\sql\mantenimiento\obtener_equipos_base.sql
2025-08-18 20:45:45 | INFO     | rexus.modules.mantenimiento.controller | Datos iniciales de mantenimiento cargados exitosamente
[INFO] Datos iniciales de mantenimiento cargados exitosamente
[Mantenimiento] Controlador creado exitosamente
[Mantenimiento] Paso 4: Configurando conexiones...
[Mantenimiento] Vista conectada al controlador
[Mantenimiento] Paso 5: Cargando datos iniciales...
2025-08-18 20:45:45 | WARNING  | rexus.core.module_manager | [Mantenimiento] Método cargar_mantenimiento no encontrado en controlador
[WARNING] [Mantenimiento] Método cargar_mantenimiento no encontrado en controlador
2025-08-18 20:45:45 | INFO     | rexus.modules.mantenimiento.controller | Verificación completada: 0 vencidos, 0 próximos
[INFO] Verificación completada: 0 vencidos, 0 próximos
2025-08-18 20:45:45 | INFO     | rexus.modules.mantenimiento.controller | Datos iniciales de mantenimiento cargados exitosamente
[INFO] Datos iniciales de mantenimiento cargados exitosamente
[CHECK] [Mantenimiento] Datos cargados con método genérico: cargar_datos_iniciales
[CHECK] [Mantenimiento] Módulo cargado exitosamente
[Auditoria] Iniciando carga de módulo...
[Auditoria] Paso 1: Creando modelo...
[Auditoria] Instanciando clase modelo: AuditoriaModel
2025-08-18 20:45:47 | INFO     | rexus.modules.auditoria.model | OK [AUDITORIA] Sistema unificado de sanitización cargado
[INFO] OK [AUDITORIA] Sistema unificado de sanitización cargado
2025-08-18 20:45:47 | ERROR    | rexus.modules.auditoria.model | [ERROR AUDITORÍA] Conexión a base de datos no disponible
[ERROR] [ERROR AUDITORÍA] Conexión a base de datos no disponible
[Auditoria] Modelo creado con conexión BD
[Auditoria] Paso 2: Creando vista...
[Auditoria] Instanciando clase vista: AuditoriaView
[THEME_FIX] Tema oscuro detectado - aplicando correcciones a módulo
[THEME_FIX] Estilos seguros aplicados a AuditoriaView
[AUDITORÍA] Estilos aplicados con correcciones de legibilidad
[Auditoria] Vista creada exitosamente
[Auditoria] Paso 3: Creando controlador...
[Auditoria] Instanciando clase controlador: AuditoriaController
2025-08-18 20:45:47 | ERROR    | rexus.modules.auditoria.model | [ERROR AUDITORÍA] Sin conexión a BD para obtener registros
[ERROR] [ERROR AUDITORÍA] Sin conexión a BD para obtener registros
[AUDITORÍA] 0 registros cargados en la tabla
2025-08-18 20:45:47 | ERROR    | rexus.modules.auditoria.model | [ERROR AUDITORÍA] Sin conexión a BD para obtener estadísticas
[ERROR] [ERROR AUDITORÍA] Sin conexión a BD para obtener estadísticas
[AUDITORÍA] Estadísticas recibidas: {}
[Auditoria] Controlador creado exitosamente
[Auditoria] Paso 4: Configurando conexiones...
[Auditoria] Vista conectada al controlador
[Auditoria] Paso 5: Cargando datos iniciales...
2025-08-18 20:45:47 | WARNING  | rexus.core.module_manager | [Auditoria] Método cargar_auditoria no encontrado en controlador
[WARNING] [Auditoria] Método cargar_auditoria no encontrado en controlador
2025-08-18 20:45:47 | ERROR    | rexus.core.module_manager | [Auditoria] Error cargando datos iniciales: 'charmap' codec can't encode characters in position 0-1: character maps to <undefined>
[ERROR] [Auditoria] Error cargando datos iniciales: 'charmap' codec can't encode characters in position 0-1: character maps to <undefined>
[DEBUG] Stack trace para Auditoria:
[DEBUG] Traceback (most recent call last):
  File "D:\martin\Rexus.app\rexus\core\module_manager.py", line 290, in _load_initial_data
    print(f"\u2139\ufe0f  [{module_name}] No requiere carga inicial de datos")
  File "C:\Python310\lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
UnicodeEncodeError: 'charmap' codec can't encode characters in position 0-1: character maps to <undefined>

[CHECK] [Auditoria] Módulo cargado exitosamente
